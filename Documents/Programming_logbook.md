# Programming logbook

### 07/05/2020
#### Main Simulation
The goal of today will be to create a good mesh for our problem. 
I found an interesting forum [discussion](https://www.cfd-online.com/Forums/openfoam-meshing/88973-simple-sphere-snappyhexmesh.html) about meshing spheres in openFoam.
Post #7 seems promising to me, he shares 2 different snappyHexMesh files (a meshing utility in openFoam to alter simple blockmeshes) and a blockmesh file.
I will first just coppy these files in the case, run them by first using the blockMesh command and then the snappyHexMesh command.
Then I will look at the meshes created in paraView and adjust from there.

![snappyHexMeshDictSphere](https://user-images.githubusercontent.com/64592913/81285483-e5357480-905f-11ea-9191-4e8c030712b7.png)

This is the mesh generated by the snappyHexMeshDictSphere file in the previously described forum post. 
It looks like a good starting point but lets double check the mesh generated by the other snappyHexMeshDict file in the forum post.

![snappyHexMeshDictCavity](https://user-images.githubusercontent.com/64592913/81286536-7f49ec80-9061-11ea-94db-64cf8323d295.png)

This is the mesh generated by the snappyHexMeshDictcavity file. This is further away from our goal mesh so I'll use the snappyHexMeshDictSphere file as starting point.

#### Salt concentration 
I coppied the NernstPlanck ICEO tutorial case file over and named it saltConcentration. I'll start by changing the blockmesh file located in constant/polymesh to a 1D case.  Only 8 vertices and 1 block is needed to define this geometry, I'll start with simplegrading (1 1 1) of the block can be later refined if needed. Changing the boundary condition to 1D by making the sides also empty, and defining the correct patches for the electrodes. Keep in mind that the order in which you state the vertices for the blocks and boundary conditions has to follow certain rules described in the openFoam userguide section 5.3. Lets inspect the created mesh in paraview. 

![saltConcentrationMesh](https://user-images.githubusercontent.com/64592913/81297779-128c1d80-9074-11ea-9557-8616da09045c.png)

This looks like the right 1D mesh so lets continue with the other files. lets start with the 0 directory, we need to change all the boundary condition names to match the ones we just defined in the blockMeshDict file I'll mention if I change the condition itself. in the cAnion and cCation files the boundary conditions at the electrodes must be changed from fixed values, I think zeroIonicFlux will be a good boundary condition to use here. There is a value entry for this B.C. I hope this doesn't fix the value in time otherwise I'll have to change this B.C.. In the psi file I changed the value of the  elecNorth to 0.025V and changed the value of the electSouth to 0V. 

Nothing needs to be changed in the constant directory for now, in the electricProperties file we can change the charge/diffusivity of the ions. Changing the charge and diffusivity of the ions will be needed to reproduce results. 

